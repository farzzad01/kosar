<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام نوبت‌دهی - دکتر محسن</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .time-slot {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .time-slot:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .time-slot.selected {
            background-color: #10b981 !important;
            color: white !important;
            border-color: #10b981 !important;
        }
        .time-slot.selected .count-text {
            color: white !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="max-w-3xl mx-auto mt-8 px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-indigo-800 mb-3">دکتر تقی‌زاده</h1>
            <p class="text-xl text-gray-700 mb-2">مشاوره آکادمیک رشته حقوق در دانشگاه های ایران</p>
            <p class="text-lg text-gray-600">کارشناسی ارشد و دکترا</p>
        </div>

        <!-- Success Message -->
        <div id="successMessage" class="bg-green-100 border-r-4 border-green-500 text-green-800 px-6 py-4 rounded-lg mb-6 text-center shadow-md hidden">
            <p class="font-semibold text-lg">نوبت شما با موفقیت ثبت شد!</p>
        </div>

        <!-- Form Card -->
        <div class="bg-white shadow-2xl rounded-2xl p-8 border-t-4 border-indigo-600">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">رزرو نوبت مشاوره</h2>
            
            <form id="appointmentForm" class="space-y-5">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">نام کامل</label>
                        <input type="text" name="name" required 
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">شماره تلفن</label>
                        <input type="tel" name="phone" required 
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none">
                    </div>
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">مقطع تحصیلی</label>
                    <select name="degree" required 
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none">
                        <option value="">انتخاب کنید</option>
                        <option value="master">کارشناسی ارشد</option>
                        <option value="phd">دکترا</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">تاریخ نوبت</label>
                    <input type="text" id="persianDatePicker" name="appointment_date" required readonly
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none cursor-pointer"
                        placeholder="انتخاب تاریخ">
                    <input type="hidden" id="gregorianDate" name="appointment_date_gregorian">
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-3">ساعت حضور (7 عصر - 12 نیمه شب)</label>
                    <input type="hidden" name="appointment_time" id="selectedTime" required>
                    <div class="grid grid-cols-3 md:grid-cols-6 gap-3">
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="19:00">
                            <div class="font-bold text-gray-700 text-base">19:00</div>
                            <div class="text-xs text-gray-500 mt-1">7 عصر</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="20:00">
                            <div class="font-bold text-gray-700 text-base">20:00</div>
                            <div class="text-xs text-gray-500 mt-1">8 شب</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="21:00">
                            <div class="font-bold text-gray-700 text-base">21:00</div>
                            <div class="text-xs text-gray-500 mt-1">9 شب</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="22:00">
                            <div class="font-bold text-gray-700 text-base">22:00</div>
                            <div class="text-xs text-gray-500 mt-1">10 شب</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="23:00">
                            <div class="font-bold text-gray-700 text-base">23:00</div>
                            <div class="text-xs text-gray-500 mt-1">11 شب</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                        <div class="time-slot bg-white border-2 border-gray-300 rounded-lg p-3 text-center" data-time="00:00">
                            <div class="font-bold text-gray-700 text-base">00:00</div>
                            <div class="text-xs text-gray-500 mt-1">12 نیمه شب</div>
                            <div class="count-text text-indigo-600 font-bold text-sm mt-2">0 رزرو</div>
                        </div>
                    </div>
                    <p id="timeError" class="text-red-500 text-sm mt-2 hidden">لطفا ساعت حضور را انتخاب کنید</p>
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">دلیل مراجعه</label>
                    <textarea name="reason" required rows="4"
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"></textarea>
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">مدت حضور مورد انتظار</label>
                    <input type="text" name="duration" required 
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                        placeholder="مثال: 30 دقیقه">
                </div>

                <button type="submit" 
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-lg transition duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                    تایید رزرو
                </button>
            </form>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-gray-600">
            <p class="text-sm">برای تایید نوبت با شما تماس گرفته خواهد شد</p>
        </div>
    </div>

    <script>
        // Initialize Persian Date Picker
        $(document).ready(function() {
            $('#persianDatePicker').persianDatepicker({
                format: 'YYYY/MM/DD',
                initialValue: false,
                autoClose: true,
                calendar: {
                    persian: {
                        locale: 'fa'
                    }
                },
                onSelect: function(unix) {
                    // Convert Persian date to Gregorian
                    var persianDate = new persianDate(unix);
                    var gregorianDate = persianDate.toCalendar('gregorian').format('YYYY-MM-DD');
                    $('#gregorianDate').val(gregorianDate);
                }
            });
        });

        // Time slot selection
        const timeSlots = document.querySelectorAll('.time-slot');
        const selectedTimeInput = document.getElementById('selectedTime');
        const timeError = document.getElementById('timeError');

        timeSlots.forEach(slot => {
            slot.addEventListener('click', function() {
                timeSlots.forEach(s => s.classList.remove('selected'));
                this.classList.add('selected');
                selectedTimeInput.value = this.getAttribute('data-time');
                timeError.classList.add('hidden');
            });
        });

        // Form submission
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedTimeInput.value) {
                timeError.classList.remove('hidden');
                document.querySelector('.time-slot').scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }

            // Show success message
            document.getElementById('successMessage').classList.remove('hidden');
            this.reset();
            timeSlots.forEach(s => s.classList.remove('selected'));
            selectedTimeInput.value = '';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
